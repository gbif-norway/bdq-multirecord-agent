NOTICE 2025-09-04T11:25:16.482904Z [protoPayload.serviceName: run.googleapis.com] [protoPayload.methodName: google.cloud.run.v1.Services.ReplaceService] [protoPayload.resourceName: namespaces/gen-lang-client-0895950745/services/bdq-multirecord-agent] [protoPayload.authenticationInfo.principalEmail: 638241344017-compute@developer.gserviceaccount.com] audit_log, method: "google.cloud.run.v1.Services.ReplaceService", principal_email: "638241344017-compute@developer.gserviceaccount.com"
INFO 2025-09-04T11:25:30.271851Z Starting new instance. Reason: DEPLOYMENT_ROLLOUT - Instance started due to traffic shifting between revisions due to deployment, traffic split adjustment, or deployment health check.
DEFAULT 2025-09-04T11:25:34.245937Z 2025-09-04 11:25:34,246 - app.utils.logger - INFO - Logging configured with level: INFO
DEFAULT 2025-09-04T11:25:34.247736Z INFO: Started server process [1]
DEFAULT 2025-09-04T11:25:34.247797Z INFO: Waiting for application startup.
DEFAULT 2025-09-04T11:25:34.248243Z 2025-09-04 11:25:34,249 - app.main - INFO - Service instance starting
DEFAULT 2025-09-04T11:25:34.528192Z 2025-09-04 11:25:34,528 - app.services.tg2_parser - INFO - Parsing TG2 test mappings from: TG2_tests.csv
DEFAULT 2025-09-04T11:25:34.528226Z 2025-09-04 11:25:34,529 - app.services.tg2_parser - INFO - Absolute path: /app/TG2_tests.csv
DEFAULT 2025-09-04T11:25:34.528472Z 2025-09-04 11:25:34,529 - app.services.tg2_parser - INFO - File exists: True
DEFAULT 2025-09-04T11:25:34.528550Z 2025-09-04 11:25:34,529 - app.services.tg2_parser - INFO - Current working directory: /app
DEFAULT 2025-09-04T11:25:34.536929Z 2025-09-04 11:25:34,537 - app.services.tg2_parser - WARNING - Could not determine library/class for test ISSUE_ANNOTATION_NOTEMPTY
DEFAULT 2025-09-04T11:25:34.537049Z 2025-09-04 11:25:34,537 - app.services.tg2_parser - WARNING - Could not determine library/class for test MEASURE_VALIDATIONTESTS_NOTCOMPLIANT
DEFAULT 2025-09-04T11:25:34.539129Z 2025-09-04 11:25:34,540 - app.services.tg2_parser - WARNING - Could not determine library/class for test MEASURE_AMENDMENTS_PROPOSED
DEFAULT 2025-09-04T11:25:34.542736Z 2025-09-04 11:25:34,543 - app.services.tg2_parser - WARNING - Could not determine library/class for test MEASURE_VALIDATIONTESTS_PREREQUISITESNOTMET
DEFAULT 2025-09-04T11:25:34.542803Z 2025-09-04 11:25:34,543 - app.services.tg2_parser - WARNING - Could not determine library/class for test MEASURE_VALIDATIONTESTS_COMPLIANT
DEFAULT 2025-09-04T11:25:34.544244Z 2025-09-04 11:25:34,545 - app.services.tg2_parser - INFO - Successfully parsed 105 test mappings
DEFAULT 2025-09-04T11:25:34.544301Z 2025-09-04 11:25:34,545 - app.services.bdq_cli_service - INFO - Loaded 105 test mappings from TG2_tests.csv
DEFAULT 2025-09-04T11:25:34.544383Z 2025-09-04 11:25:34,545 - app.services.bdq_cli_service - INFO - Loaded 105 test mappings
DEFAULT 2025-09-04T11:25:34.544551Z 2025-09-04 11:25:34,545 - app.services.bdq_cli_service - INFO - üöÄ BDQ CLI Service v2.0-FIXED initialized with JAR: /opt/bdq/bdq-cli.jar
DEFAULT 2025-09-04T11:25:34.544605Z 2025-09-04 11:25:34,545 - app.services.bdq_cli_service - INFO - ‚úÖ Claude's Darwin Core column normalization is ACTIVE!
DEFAULT 2025-09-04T11:25:34.544659Z 2025-09-04 11:25:34,545 - app.services.bdq_cli_service - INFO - ‚úÖ CLI performance fix deployed - expecting ~1s per test instead of 122s timeout!
DEFAULT 2025-09-04T11:25:34.544714Z 2025-09-04 11:25:34,545 - app.main - INFO - BDQ CLI Service initialized successfully
DEFAULT 2025-09-04T11:25:36.154008Z 2025-09-04 11:25:36,154 - app.main - WARNING - BDQ CLI connection test failed
DEFAULT 2025-09-04T11:25:36.154168Z INFO: Application startup complete.
DEFAULT 2025-09-04T11:25:36.157599Z INFO: Uvicorn running on http://0.0.0.0:8080 (Press CTRL+C to quit)
INFO 2025-09-04T11:25:36.158113Z Default STARTUP TCP probe succeeded after 1 attempt for container "placeholder-1" on port 8080.
INFO 2025-09-04T11:25:36.228200Z [protoPayload.serviceName: run.googleapis.com] [protoPayload.methodName: /Services.ReplaceService] [protoPayload.resourceName: namespaces/gen-lang-client-0895950745/revisions/bdq-multirecord-agent-00040-s4k] Ready condition status changed to True for Revision bdq-multirecord-agent-00040-s4k with message: Deploying revision succeeded in 18.6s.
INFO 2025-09-04T11:25:37.505886Z [protoPayload.serviceName: run.googleapis.com] [protoPayload.methodName: /Services.ReplaceService] [protoPayload.resourceName: namespaces/gen-lang-client-0895950745/services/bdq-multirecord-agent] Ready condition status changed to True for Service bdq-multirecord-agent.
INFO 2025-09-04T11:26:07.432833Z [httpRequest.requestMethod: POST] [httpRequest.status: 200] [httpRequest.responseSize: 161 B] [httpRequest.latency: 487 ms] [httpRequest.userAgent: Mozilla 5.0] https://bdq-multirecord-agent-638241344017.europe-west1.run.app/email/incoming
DEFAULT 2025-09-04T11:26:07.437629Z 2025-09-04 11:26:07,438 - app.main - INFO - Received request with 239823 bytes
DEFAULT 2025-09-04T11:26:07.707868Z 2025-09-04 11:26:07,708 - app.main - INFO - Parsed JSON data keys: ['receivedAt', 'messageId', 'threadId', 'historyId', 'labelIds', 'snippet', 'headers', 'body', 'attachments']
DEFAULT 2025-09-04T11:26:07.708007Z 2025-09-04 11:26:07,708 - app.main - INFO - Successfully parsed email from Rukaya Johaadien <rukayaj@gmail.com>
DEFAULT 2025-09-04T11:26:07.920525Z INFO: 169.254.169.126:4408 - "POST /email/incoming HTTP/1.1" 200 OK
DEFAULT 2025-09-04T11:26:07.920925Z 2025-09-04 11:26:07,921 - app.services.email_service - INFO - CSV attachment candidate: filename=occurrence.txt, mime=text/plain, size=179465, b64_len=239288
DEFAULT 2025-09-04T11:26:07.925115Z 2025-09-04 11:26:07,925 - app.services.email_service - INFO - Extracted CSV attachment: occurrence.txt (178322 chars)
DEFAULT 2025-09-04T11:26:07.952561Z 2025-09-04 11:26:07,953 - app.services.csv_service - INFO - Parsed CSV with 200 rows, 48 columns, core type: occurrence
DEFAULT 2025-09-04T11:26:07.954086Z 2025-09-04 11:26:07,954 - app.services.bdq_cli_service - INFO - Added dwc: prefixes to 48 columns: ['id -> dwc:id', 'modified -> dwc:modified', 'license -> dwc:license', 'institutionID -> dwc:institutionID', 'institutionCode -> dwc:institutionCode']...
DEFAULT 2025-09-04T11:26:07.954545Z 2025-09-04 11:26:07,955 - app.services.bdq_cli_service - INFO - Filtered to 50 applicable tests from 105 total tests
DEFAULT 2025-09-04T11:26:07.954598Z 2025-09-04 11:26:07,955 - app.services.bdq_cli_service - INFO - Original CSV columns: 48, Normalized columns: 48
DEFAULT 2025-09-04T11:26:07.954742Z 2025-09-04 11:26:07,955 - app.services.bdq_cli_service - WARNING - ‚ö° Cloud Run mode: Limiting to 10 tests out of 50 to prevent timeout
DEFAULT 2025-09-04T11:26:09.391852Z 2025-09-04 11:26:09,291 - app.services.bdq_cli_service - INFO - üß™ Starting BDQ test execution on 200 records with 10 applicable tests
DEFAULT 2025-09-04T11:26:14.589303Z 2025-09-04 11:26:14,490 - app.services.bdq_cli_service - INFO - üîÑ [1/10] Executing VALIDATION_COUNTRYCODE_STANDARD...
DEFAULT 2025-09-04T11:28:18.790377Z 2025-09-04 11:28:18,792 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_COUNTRYCODE_STANDARD
DEFAULT 2025-09-04T11:28:18.888852Z 2025-09-04 11:28:18,890 - app.services.bdq_cli_service - WARNING - ‚ùå [1/10] VALIDATION_COUNTRYCODE_STANDARD: No results returned in 124.40s
DEFAULT 2025-09-04T11:28:18.888936Z 2025-09-04 11:28:18,891 - app.services.bdq_cli_service - INFO - üîÑ [2/10] Executing VALIDATION_COUNTRY_FOUND...
DEFAULT 2025-09-04T11:30:22.395310Z 2025-09-04 11:30:22,396 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_COUNTRY_FOUND
DEFAULT 2025-09-04T11:30:22.395489Z 2025-09-04 11:30:22,396 - app.services.bdq_cli_service - WARNING - ‚ùå [2/10] VALIDATION_COUNTRY_FOUND: No results returned in 123.51s
DEFAULT 2025-09-04T11:30:22.395570Z 2025-09-04 11:30:22,396 - app.services.bdq_cli_service - INFO - üîÑ [3/10] Executing VALIDATION_PHYLUM_FOUND...
DEFAULT 2025-09-04T11:32:28.096625Z 2025-09-04 11:32:28,091 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_PHYLUM_FOUND
DEFAULT 2025-09-04T11:32:28.490015Z 2025-09-04 11:32:28,392 - app.services.bdq_cli_service - WARNING - ‚ùå [3/10] VALIDATION_PHYLUM_FOUND: No results returned in 125.71s
DEFAULT 2025-09-04T11:32:28.490341Z 2025-09-04 11:32:28,491 - app.services.bdq_cli_service - INFO - üîÑ [4/10] Executing VALIDATION_FAMILY_FOUND...
DEFAULT 2025-09-04T11:34:33.789595Z 2025-09-04 11:34:33,790 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_FAMILY_FOUND
DEFAULT 2025-09-04T11:34:33.889554Z 2025-09-04 11:34:33,890 - app.services.bdq_cli_service - WARNING - ‚ùå [4/10] VALIDATION_FAMILY_FOUND: No results returned in 125.40s
DEFAULT 2025-09-04T11:34:33.889606Z 2025-09-04 11:34:33,890 - app.services.bdq_cli_service - INFO - üîÑ [5/10] Executing VALIDATION_DECIMALLONGITUDE_INRANGE...
DEFAULT 2025-09-04T11:36:39.409234Z 2025-09-04 11:36:39,409 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_DECIMALLONGITUDE_INRANGE
DEFAULT 2025-09-04T11:36:39.588639Z 2025-09-04 11:36:39,589 - app.services.bdq_cli_service - WARNING - ‚ùå [5/10] VALIDATION_DECIMALLONGITUDE_INRANGE: No results returned in 125.52s
DEFAULT 2025-09-04T11:36:39.588735Z 2025-09-04 11:36:39,589 - app.services.bdq_cli_service - INFO - üîÑ [6/10] Executing AMENDMENT_COORDINATES_FROM_VERBATIM...
DEFAULT 2025-09-04T11:38:45.491297Z 2025-09-04 11:38:45,292 - app.services.bdq_cli_service - ERROR - CLI timed out for test AMENDMENT_COORDINATES_FROM_VERBATIM
DEFAULT 2025-09-04T11:38:45.593641Z 2025-09-04 11:38:45,593 - app.services.bdq_cli_service - WARNING - ‚ùå [6/10] AMENDMENT_COORDINATES_FROM_VERBATIM: No results returned in 126.00s
DEFAULT 2025-09-04T11:38:45.594122Z 2025-09-04 11:38:45,594 - app.services.bdq_cli_service - INFO - üîÑ [7/10] Executing VALIDATION_MINELEVATION_INRANGE...
DEFAULT 2025-09-04T11:40:50.390075Z 2025-09-04 11:40:50,390 - app.services.bdq_cli_service - ERROR - CLI timed out for test VALIDATION_MINELEVATION_INRANGE
DEFAULT 2025-09-04T11:40:50.390229Z 2025-09-04 11:40:50,390 - app.services.bdq_cli_service - WARNING - ‚ùå [7/10] VALIDATION_MINELEVATION_INRANGE: No results returned in 124.80s
DEFAULT 2025-09-04T11:40:50.390298Z 2025-09-04 11:40:50,390 - app.services.bdq_cli_service - INFO - üîÑ [8/10] Executing VALIDATION_COUNTRY_NOTEMPTY...
DEFAULT 2025-09-04T11:41:15.152713Z 2025-09-04 11:41:15,153 - app.services.bdq_cli_service - ERROR - ‚ùå [8/10] VALIDATION_COUNTRY_NOTEMPTY: Error in 24.76s - 1 validation error for BDQTestResult
DEFAULT 2025-09-04T11:41:15.152735Z test_id
DEFAULT 2025-09-04T11:41:15.152740Z Field required [type=missing, input_value={'record_id': 'urn:uuid:6...ntry contains a value.'}, input_type=dict]
DEFAULT 2025-09-04T11:41:15.152745Z For further information visit https://errors.pydantic.dev/2.11/v/missing
DEFAULT 2025-09-04T11:41:15.152994Z 2025-09-04 11:41:15,153 - app.services.bdq_cli_service - INFO - üîÑ [9/10] Executing VALIDATION_SCIENTIFICNAME_FOUND...
DEFAULT 2025-09-04T11:41:20.698243Z 2025-09-04 11:41:20,698 - app.services.bdq_cli_service - ERROR - ‚ùå [9/10] VALIDATION_SCIENTIFICNAME_FOUND: Error in 5.54s - 1 validation error for BDQTestResult
DEFAULT 2025-09-04T11:41:20.698252Z test_id
DEFAULT 2025-09-04T11:41:20.698256Z Field required [type=missing, input_value={'record_id': 'urn:uuid:6...BIF_BACKBONE_TAXONOMY]'}, input_type=dict]
DEFAULT 2025-09-04T11:41:20.698260Z For further information visit https://errors.pydantic.dev/2.11/v/missing
DEFAULT 2025-09-04T11:41:20.698291Z 2025-09-04 11:41:20,698 - app.services.bdq_cli_service - INFO - üîÑ [10/10] Executing VALIDATION_OCCURRENCEID_NOTEMPTY...
